<!DOCTYPE html>


<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{navbar::layout(~{::section})}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON to DataTable</title>
</head>
<body>
    <section>
    <!-- Include DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap4.min.css">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Include DataTables JS -->
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap4.min.js"></script>
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->

    <link rel="stylesheet" href="" th:href="@{/css/grid.css}">
<style>
    
/* Trigger Button */
button {
    padding: 10px 20px;
    border: none;
    background-color: #3498db;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    transition: background-color 0.2s;
}

button:hover {
    background-color: #2980b9;
}

/* The Modal (background) */
.modal {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.7);
}

/* Modal Content */
.modal-content {
    position: relative;
    background-color: #ffffff;
    margin: 10% auto;
    padding: 20px;
    width: 50%;
    border-radius: 8px;
    box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.3);
}

/* The Close Button */
.close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s;
}

.close:hover,
.close:focus {
    color: #ff5b5b;
}

/* Modal Text */
p {
    font-size: 18px;
}
</style>



<div id="tableButtonGroup" class="m-2">
    <a href="" class="btn btn-primary m-1"><i class="btn-add"></i>Add</a>
</div>
<!-- Table container -->
<table id="jsonTable" class="table table-striped table-bordered table-sm" style="width:99%;margin: 0 auto;">
    <!-- Table header will be added dynamically -->
    <thead>
    </thead>
    <!-- Table body will be added dynamically -->
    <tbody>
    </tbody>
</table>

 <!-- The Modal -->
 <div id="myModal" class="modal">
    <div class="modal-content">
        <span id="closeModalBtn" class="close">&times;</span>
        <div class="login-box">
            <h2>Category</h2>
            <form action="#" th:action="@{/master/savecat}" method="POST" id="form">
      
      
              <div class="user-box">
                <input type="text" name="code" id="code" required="" />
                <!-- th:value="${data != null ? data.code : ''}" -->
                <!-- th:value="${data!=null? data.code:''
                }" -->
                <label>Category Code</label>
              </div>
              <div class="user-box">
                <input type="text" name="name" id="name" required="" />
                <!-- th:value="${data!=null? data.name:''}" -->
                <label>Category Name</label>
              </div>
              <!-- <a href="#" th:href="@{/savecat?name=marur&code=dalvi}" style="border: 1px solid;"> -->
              <button type="submit" id="save" style="border-radius: 25px" class="btn-form">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Save
              </button>
              <!-- </a> -->
      
              <div th:if="${errormessage}" th:text="${errormessage}" id="errormessage" class="alert alert-danger"
                style="display: none;"></div>
      
              <div th:if="${sucmessage}" id="sucmessage" th:text="${sucmessage}" class="alert alert-success"
                style="display: none;"></div>
            </form>
      
      
          </div>
    </div>
</div>
<script src="" th:src=@{/js/grid.js}></script>
<script th:inline="javascript">
    // JSON data
    
    var username = /*[[${user}]]*/ '';
        console.log('Username:', username);
    var jsonData=username;


    // Function to convert JSON to DataTable
    // function jsonToDataTable(jsonData) {
    //   // Extract column headers from the first object in the array
    //   var columns = Object.keys(jsonData[0]);

    //   // Initialize DataTable
    //   var table = $('#jsonTable').DataTable({
    //     data: jsonData,
    //     columns: columns.map(function(column) {
    //       return { data: column };
    //     }),
    //     paging: true, // Enable pagination
    //     searching: true, // Enable search box
    //     order: [] // Disable initial sorting
    //   });

    //   // Add column headers to the table
    //   $('#jsonTable thead').append('<tr>' +
    //     columns.map(function(column) {
    //       return '<th>' + column + '</th>';
    //     }).join('') +
    //     '</tr>');
    // }

    // Call the function with your JSON data
    jsonToDataTable(jsonData);

    // window.onload = function(){
    //   //----- Insert 'ButtonGroup' between 'Record limit selector' and 'Search Bar' -----//
    //   let buttonList = document.getElementById('tableButtonGroup');
    //   let table_wrapper = document.getElementById('jsonTable_wrapper').children;
    //   let table_entryLimit = table_wrapper[0].children[0];
    //   table_entryLimit.after(buttonList);

    //   //----- Adding View and Edit buttons to DataTable -----//
    //   let tableHead = document.getElementById('jsonTable').children[0];
    //   let tableHeadRow = tableHead.children[1];
    //   let actionColumn = document.createElement('th');
    //   actionColumn.innerText = "Action";
    //   tableHeadRow.prepend(actionColumn);
    //   //--Selecting rows from table body
    //   let tableBody = document.getElementById('jsonTable').children[1];
    //   let tableBodyRows = tableBody.children;

    //   //----- Adding Checkbox column to DataTable
    //   let checkboxColumn = document.createElement('th');
    //   let headerCheckbox = document.createElement('input');
    //   headerCheckbox.type = "checkbox";
    //   console.log(headerCheckbox);
    //   //checkboxColumn.append(headerCheckbox);
    //  // tableHeadRow.prepend(checkboxColumn);

    //   for(let loop = 0; loop <= tableBodyRows.length; loop++){
    //     //-----
    //     let multiButtonColumn = document.createElement('td');
    //     multiButtonColumn.innerHTML = '<a href="" class="btn btn-primary m-1"><i class="btn-view"></i></a><a href="" class="btn btn-primary m-1"><i class="btn-edit"></i></a><a href="" class="btn btn-danger  m-1"><i class="btn-delete"></i> </a>';

    //     let checkboxBodyColumn = document.createElement('td');
    //     let bodyCheckbox = document.createElement('input');
    //     bodyCheckbox.type = "checkbox";
    //     checkboxBodyColumn.append(bodyCheckbox);

    //     tableBodyRows[loop].prepend(multiButtonColumn);
    //   // tableBodyRows[loop].prepend(checkboxBodyColumn);
    //   }

    //   //----- Search bar styling -----//
    //   let searchIcon = document.createElement('i');
    //   searchIcon.className = "icon-search";
    //   let filterLabel = document.getElementById('jsonTable_filter').children[0]
    //   filterLabel.prepend(searchIcon);
    // }
</script>

    </section>
</body>
</html>